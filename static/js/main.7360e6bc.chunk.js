/*! For license information please see main.7360e6bc.chunk.js.LICENSE.txt */
(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{14:function(t,e,i){},15:function(t,e,i){},17:function(t,e,i){},18:function(t,e,i){},19:function(t,e,i){"use strict";i.r(e);var s=i(1),n=i.n(s),a=i(9),r=i.n(a),c=(i(14),i(3)),u=i(4),o=i(5),l=(i(15),i(0)),j=function(t){var e=t.id,i=t.taken,s=t.type,n=t.click,a=t.hit,r=(t.number,!0===i);return Object(l.jsx)("div",{id:e,"data-taken":!!r,"data-hit":a,"data-testid":"tile","data-type":s,className:!0===a&&"tile"!==s?"hit":!0===a&&"tile"===s?"miss":e.includes("comp")?"tile":!1===a&&"tile"!==s?"ship":"tile",onClick:n})},b=(i(17),i(2)),f=function(t){return t<0||t>99},p=function(t){return Math.floor(Math.random()*t)},O=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},h=function(t,e,i){return t.every((function(t){return!1!==f(t+e)||(!0===i[e+t].hit||void 0)}))},d=function(t,e,i,s){var n=Object.assign({},t),a=Object(b.a)({},n),r=a.tiles,c=a.turn,l=a.setRotate,j=a.lastHit,f=a.setLastHit,p=a.firstHit,O=a.setRestart;!1===r[e].hit?function(t,e,i){var s=Object.assign({},t),n=Object(b.a)({},s),a=n.tiles,r=n.setTiles,c=n.updateHits,l=n.setRotate,j=n.setLastHit;console.log("make predicted move"),r((function(t){return Object(o.a)(t)}),Object(u.a)({},a[e],a[e].hit=!0)),c(a[e].type),"tile"!==a[e].type&&(j(e),l(-10===i||10===i?[2,3]:[0,1]))}(Object(b.a)({},n),e,i):!1===h(s,j,r)?(console.log("make move if available tiles after lastHit"),m(Object(b.a)({},n))):!1===h(s,p,r)?(console.log("go back to first hit and predict"),f(p),O("restart"+c)):(console.log("decide reset hit or set last hit as first"),l([0,3]),!1===function(t,e,i){t.every((function(t){if(!0===i[e+t].hit)return!0}))}(s,p,r)?f(p):f(-100),O("restart"+c))},m=function(t){var e=Object.assign({},t);console.log("make comp move");var i=Object(b.a)({},e),s=i.player,n=i.turn,a=i.lastHit;"user"===s&&n>0&&(-100===a?function(t){var e=Object.assign({},t),i=Object(b.a)({},e),s=i.tiles,n=i.setTiles,a=i.updateHits,r=i.setLastHit,c=i.setFirstHit;console.log("random move");var l=p(99);!1===s[l].hit?(n((function(t){return Object(o.a)(t)}),Object(u.a)({},s[l],s[l].hit=!0)),a(s[l].type),"tile"!==s[l].type&&(r(l),c(l))):m(Object(b.a)({},e))}(Object(b.a)({},e)):function(t){var e=Object.assign({},t),i=Object(b.a)({},e),s=i.tiles,n=i.turn,a=i.lastHit,r=i.rotate,c=i.setRotate,u=i.setLastHit,o=i.firstHit,l=i.setRestart,j=[-1,1,-10,10],p=j[O(r[0],r[1])],v=a+p,y=j.slice(r[0],r[1]+1);!1===f(v)?d(Object(b.a)({},e),v,p,y):!0===h(y,a,s)?(console.log("all tiles invalid reset"),c([0,3]),u(o),l("restart"+n)):(console.log("restart make comp move"),m(Object(b.a)({},e)))}(Object(b.a)({},e)))},v=m,y=function(t){return[{shipType:"Carrier",sizeHor:[0,1,2,3,4],sizeVer:[0,10,20,30,40],hits:0,sunk:!1,key:"".concat(t," Carrier")},{shipType:"Battleship",sizeHor:[0,1,2,3],sizeVer:[0,10,20,30],hits:0,sunk:!1,key:"".concat(t," Battleship")},{shipType:"Cruiser",sizeHor:[0,1,2],sizeVer:[0,10,20],hits:0,sunk:!1,key:"".concat(t," Cruiser")},{shipType:"Submarine",sizeHor:[0,1,2],sizeVer:[0,10,20],hits:0,sunk:!1,key:"".concat(t," Submarine")},{shipType:"Destroyer",sizeHor:[0,1],sizeVer:[0,10],hits:0,sunk:!1,key:"".concat(t," Destroyer")}]},g=function t(e,i,s){var n=function(t,e){return 1===p(2)?e[t].sizeHor:e[t].sizeVer}(e,s),a=1;n===s[e].sizeVer&&(a=10);var r=p(i.length-n.length*a),c=s[e].shipType;!0!==function(t,e,i){if(!0===function(t,e){if(t.some((function(t){if(e%10!==0&&(e+t)%10===0)return!0})))return!0}(e,t)||!0===function(t,e,i){if(t.some((function(t){if(!0===i[e+t].taken)return!0})))return!0}(e,t,i))return!0}(r,n,i)?n.map((function(t){i[r+t].taken=!0,i[r+t].type=c})):t(e,i,s)},k=function(t,e){for(var i=0;i<5;i++)g(i,t,e)},H=function(t){var e=t.player,i=t.gameStatus,n=t.setGameStatus,a=t.turn,r=t.setTurn,b=t.restart,f=t.setRestart,p=t.resetGame,O=Object(s.useState)([]),h=Object(c.a)(O,2),d=h[0],m=h[1],g=Object(s.useState)(-100),H=Object(c.a)(g,2),x=H[0],S=H[1],T=Object(s.useState)(""),z=Object(c.a)(T,2),R=z[0],G=z[1],C=Object(s.useState)([0,3]),N=Object(c.a)(C,2),V=N[0],E=N[1],L=Object(s.useState)([]),M=Object(c.a)(L,2),B=M[0],A=M[1],D=Object(s.useState)(y(e)),w=Object(c.a)(D,2),F=w[0],I=w[1],J=[],P=function(){for(var t=0;t<100;t++)J.push({key:t+e,id:t+e,taken:!1,type:"tile",hit:!1,number:t})};Object(s.useEffect)((function(){P(),k(J,F),m(J)}),[]);var W=function(t){if("tile"!==t){var e=F.findIndex((function(e){return e.shipType===t}));I((function(t){return Object(o.a)(t)}),Object(u.a)({},F[e],F[e].hits=F[e].hits+1)),F[e].hits===F[e].sizeHor.length&&I((function(t){return Object(o.a)(t)}),Object(u.a)({},F[e],F[e].sunk=!0))}},q=function(t){t.preventDefault();var e=t.target.id,s=t.target.getAttribute("data-hit"),n=t.target.getAttribute("data-type");if("playing"===i&&"false"===s&&e.includes("comp")){var a=Number(e.slice(0,-4));m((function(t){return Object(o.a)(t)}),Object(u.a)({},d[a],d[a].hit=!0)),W(n),r((function(t){return t+1}))}};Object(s.useEffect)((function(){S(-100),E([0,3])}),[B]),Object(s.useEffect)((function(){v({tiles:d,setTiles:m,updateHits:W,player:e,turn:a,rotate:V,setRotate:E,lastHit:x,setLastHit:S,firstHit:R,setFirstHit:G,setRestart:f})}),[a,b]);return Object(s.useEffect)((function(){!function(){var t,i=F.filter((function(t){return t.hits===t.sizeHor.length}));t="comp"===e?"Player":"Computer",5===i.length&&n("Game Over ".concat(t," Wins")),i.length>B.length&&A(i)}()}),[F]),Object(s.useEffect)((function(){J=[],P(),S(-100),G(""),E([0,3]),A([]),f(""),r(0),n("playing"),I(y(e)),k(J,F),m(J)}),[p]),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{id:e,className:"board",children:d.map((function(t){return Object(l.jsx)(j,{id:t.id,taken:t.taken,type:t.type,hit:t.hit,click:q},t.key)}))}),Object(l.jsxs)("div",{className:"sunk-list",children:[Object(l.jsx)("p",{className:"sunk-text",children:"Sunk:"}),F.map((function(t){if(t.sunk)return Object(l.jsx)("p",{className:"sunk-text",children:t.shipType+","},"".concat(t.shipType," ").concat(e))}))]})]})},x=(i(18),function(){var t=Object(s.useState)("playing"),e=Object(c.a)(t,2),i=e[0],n=e[1],a=Object(s.useState)(""),r=Object(c.a)(a,2),u=r[0],o=r[1],j=Object(s.useState)(0),b=Object(c.a)(j,2),f=b[0],p=b[1],O=Object(s.useState)(!1),h=Object(c.a)(O,2),d=h[0],m=h[1];return Object(l.jsxs)("div",{id:"game-container",children:[Object(l.jsx)("p",{id:"game-over",children:"React Battleship"}),Object(l.jsxs)("div",{id:"game",children:[Object(l.jsx)(H,{player:"user",gameStatus:i,setGameStatus:n,turn:f,setTurn:p,restart:u,setRestart:o,resetGame:d,setResetGame:m}),Object(l.jsx)(H,{player:"comp",gameStatus:i,setGameStatus:n,turn:f,setTurn:p,restart:u,setRestart:o,resetGame:d,setResetGame:m})]}),Object(l.jsx)("p",{id:"game-over",children:"playing"!==i?i:"Turn: "+f}),Object(l.jsx)("button",{id:"reset-button",onClick:function(){m(!d)},children:"Reset"})]})});var S=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(x,{})})};r.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(S,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.7360e6bc.chunk.js.map